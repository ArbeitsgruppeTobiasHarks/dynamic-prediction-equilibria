\documentclass[titlepage]{scrartcl}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{hyperref}
\usepackage{mathtools}
\usepackage{pythonhighlight}
\usepackage{enumitem}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{todonotes}
\usepackage{algorithm}
\usepackage[maxnames=4]{biblatex}
\usepackage[outputdir=out, cache=true]{minted}


\usepackage{tikz}
\usetikzlibrary{chains,shapes.multipart}
\usetikzlibrary{shapes,calc}
\usetikzlibrary{automata,positioning}
\usetikzlibrary{arrows, decorations.markings}
\usetikzlibrary{shapes}

\usepackage{pgfplots}
\pgfplotsset{compat=1.16}
\usepgfplotslibrary{statistics} % For boxplots

\addbibresource{literature.bib}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}

\makeatletter
\newcounter{classdef}
\newenvironment{classdef}[1][htb]
  {\floatname{algorithm}{Data Structure}
   \let\c@algorithm\c@classdef
   \begin{algorithm}[#1]%
  }{\end{algorithm}}
\makeatother

\BeforeBeginEnvironment{minted}{\vspace{0.3em}}
\AfterEndEnvironment{minted}{\vspace{-0.6em}}

\author{Michael Markl}
\title{Computation of Dynamic~Prediction~Equilibria}
\subtitle{A software project as part of the M.Sc. Mathematics at~the~University~of~Augsburg.}

\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\diff}{\,\textnormal{d}}
\newcommand{\contFcts}[2]{{C}{\left({#1},{#2}\right)}}
\newcommand{\emptyArg}{\,\boldsymbol{\cdot}\,}
\newcommand{\abs}[1]{\left| #1 \right|}

\newcommand{\minv}[1]{#1^{\leftarrow}}
\newcommand{\rev}[1]{#1^{\leftarrow}}
\newcommand{\id}{\mathbf{id}}
\newcommand{\bigO}{\mathcal{O}}
\newcommand{\firstN}[1]{[#1]}
\newcommand{\restrict}[2]{#1\vert_{#2}}
\newcommand{\colonequiv}{\vcentcolon\mspace{-1.2mu}\equiv}
\newcommand{\restrictUpTo}[2]{#1_{\leq #2}}


% Flow-specifics
\newcommand{\capa}{\nu}
\newcommand{\transit}{\tau}
\newcommand{\outEdges}[1]{\delta^-_{#1}}
\newcommand{\inEdges}[1]{\delta^+_{#1}}
\newcommand{\infl}[1][f]{{#1}^+}
\newcommand{\outfl}[1][f]{{#1}^-}
\newcommand{\bal}[2]{b_{#1,#2}}
\newcommand{\qulen}{q}
\newcommand{\predq}{\hat q}
\newcommand{\predc}{\hat c}
\newcommand{\predT}{\hat T}
\newcommand{\predl}{\hat l}
\newcommand{\predE}{\hat E}
\newcommand{\paths}{\mathcal{P}}
\newcommand{\code}[1]{\mintinline{python}{#1}}
\newcommand{\depl}{\textnormal{depl}}
\newcommand{\QueueFct}{\mathcal{Q}}

\newcommand{\predZ}{{\text{Z}}}
\newcommand{\predC}{{\text{C}}}
\newcommand{\predL}{{\text{L}}}
\newcommand{\predRL}{{\text{RL}}}
\newcommand{\predML}{{\text{ML}}}
\newcommand{\predP}{{\text{P}}}


\begin{document}
    \maketitle

    \clearpage
    \tableofcontents

    \clearpage
    \section{Introduction}

    When analyzing real-world traffic or communication networks, often simulations are used to retrieve structural information on the performance of the network given certain demands.
    Starting from a more theoretical perspective, equilibria of underlying game-theoretic models propose to give more fundamental insights.
    In this software project, we aim to compute such an equilibrium called Dynamic Prediction Equilibrium (DPE) which was recently introduced in~\cite{mainpaper}.

    We first take a closer look to general time-dependent cost functions following the First-In-First-Out (FIFO) rule in Section~\ref{sec:fifo-costs}:
    We discuss a duality of arrival and departure times that can be used for a simple Dijkstra-based algorithm to compute all so-called \emph{active edges}.
    This modification of the Dijkstra algorithm together with the duality was developed during the project; it is unclear whether this problem has been solved similarly in previous literature.
    
    In Section~\ref{sec:equilibrium-flows} we describe the mathematical flow model and define the equilibrium within this model.
    These definitions are mostly taken from~\cite{mainpaper}.

    The computation of an approximation of such an equilibrium is described in detail in section~\ref{sec:compute-dpes}.


    All code snippets presented in this work use the Python 3.8 syntax where type hints (e.g. \code{i: int}) are often used to make the underlying data encoding clearer.
    The presented source code is often a simplified version of the original code such that the reader is not distracted by technical details which might improve the performance.
    Moreover, in this work we abstract from any kind of rounding errors due to the fixed size floating point numbers.
    It is worth mentioning though, that fixing these kinds of errors was quite laborious. 
    The full source code of this software project is publicly available at \url{https://github.com/schedulaar/predicted-dynamic-flows}.

    \clearpage
    \input{fifo-cost-functions.tex}

    \clearpage
    \section{Equilibrium Flows}\label{sec:equilibrium-flows}

    The goal of this project is to compute a specific kind of equilibrium flows.
    This section gives the appropriate introduction in the mathematical model of the underlying flows and Dynamic Prediction Equilibria.
    
    \input{dynamic-flows.tex}
    \input{dynamic-prediction-equilibrium.tex}

    \clearpage
    \input{flow-computation.tex}
    
    \clearpage
    \input{computational-results.tex}

    \clearpage
    \printbibliography
\end{document}